# 旅行データ統合スキル（travel-summarizer）

## 目的
各調査エージェントの断片的な情報を1つの整合性のある旅行ガイドに統合する。

## SUMMARIZERの役割
- 各エージェント（TRANSPORT, SPOTS, FOOD-STAY, CULTURE-SAFETY, VERIFY）の出力を1つのDay JSONオブジェクトに統合
- 矛盾する情報の解決（例: 入場料が異なる場合は最新ソースを採用）
- 命名・価格の一貫性管理
- タイムラインの時間的整合性チェック（1日に収まるか）
- AI感のない自然な日本語の文体を維持

## 矛盾解決ルール

1. **料金の矛盾**: 最新の公式ソース > 旅行ブログ > 古い情報。日付が新しい方を採用
2. **営業時間の矛盾**: 公式サイト > Google Maps > 旅行サイト
3. **アクセス方法の矛盾**: 実際に行った人のブログ > 観光局サイト > 一般情報
4. **閉業・移転**: 2024年以降の情報で確認できない場合は注記を付ける

## 価格フォーマット統一

- IDR→JPY換算レート: **0.0094**で統一
- 入場料: `"fee": { "idr": 数値, "jpy": 数値 }`
- 食事費用: `"fee": { "idr": 数値, "jpy": 数値 }`
- アクセス費用: `"cost": { "idr": 数値, "jpy": 数値 }`
- 宿泊費用: `"pricePerNight": { "idr": 数値, "jpy": 数値 }`
- JPY = IDR × 0.0094（小数点以下切り捨て）

## タイムライン整合性チェック

各Dayの timeline で以下を確認:
1. 最初の time から最後の time まで24時間以内か
2. 各スポットの滞在時間（duration）+ 移動時間が次のスポットの time に間に合うか
3. 食事が1日3回（朝・昼・夕）含まれているか
4. 移動日は移動時間が適切か（バス6時間 + 観光 が1日に収まるか）

## 文体ガイド

### ゴールデンサンプル: Day 1-2の文体を基準とする

**良い例（自然な旅行ガイド風）**:
- 「空港に着いたらジャカルタの喧騒は最小限に」
- 「車窓には田園風景が広がり、3時間で高原都市バンドンに到着する」
- 「バンドンはバソの激戦区で、屋台でもレベルが高い」

**悪い例（AI感のある表現）**:
- 「〜することをお勧めします」
- 「〜が最適です」
- 「素晴らしい体験を提供します」
- 「〜をご検討ください」

### ルール
- 二人称は使わない（「あなた」は禁止）
- 命令形よりも提案形（「〜してみよう」「〜がいい」）
- 具体的な感覚描写を入れる（「もちもちの肉団子」「硫黄で乳白色に染まった」）
- 旅行雑誌のライターが書いたような文体

## 出力先

すべての統合データは `data/trip.json` に格納:
- `days[]` 配列に各Day のオブジェクト
- `cities{}` オブジェクトに各都市のPOI
- `practicalInfo{}` に横断的な実用情報
- `routeOverview.safetyAlerts[]` に安全警告

## 最終チェックリスト

- [ ] 全10日分のDayオブジェクトが存在する
- [ ] 全Dayに timeline, food, accommodation, transport がある
- [ ] 全citiesに landmarks, pois がある
- [ ] 価格フォーマットが統一されている
- [ ] 日本語の文体が統一されている
- [ ] プレースホルダー（「準備中」等）が残っていない
- [ ] `npm run build` でビルドエラーなし
